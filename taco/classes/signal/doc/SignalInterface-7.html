<!-- Generated by Harlequin WebMaker 2.2.3 (24-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>5.   The Client Side</TITLE>
</HEAD>
<BODY>
<A NAME=HEADING7></A>
<A HREF="SignalInterface-8.html"><IMG ALIGN = BOTTOM SRC = "next.gif"></A> <A HREF="SignalInterface-6.html"><IMG ALIGN = BOTTOM SRC = "prev.gif"></A> <A HREF="SignalInterface-1.html"><IMG ALIGN = BOTTOM SRC = "top.gif"></A> <A HREF="SignalInterface-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif"></A> <IMG ALIGN = BOTTOM SRC = "indexg.gif"><P>
The Device Server Signal Interface<P>
<A NAME=HEADING7-0></A>
<H1>5.   The Client Side</H1>
<HR>
 With the described commands, signals can be displayed in a generic way on the client side. <P>
<DL>
<DT><DD>1.  To find out the data type used by the command DevReadSigValues, the function dev_cmd_query() of the API-library can be used. Filtering for the command indicates the data type of the outgoing arguments.<P>
<DT><DD>2.  By executing the command DevReadSigConfig the place of a signal in the array can be determined by its name. All other properties needed for a signal display are following the signal name in the described order (see <A HREF=SignalInterface-5.html#MARKER-9-14>"The Signal Properties" on page 2</A>).<P>
<DT><DD>3.  DevReadSigValues returns the signal values in the same order as indicated by DevReadSigConfig. <P>
</DL>
 An example shows how DevReadSigConfig and DevReadSigValues can be used to display signals in a device server menu. The data type in this case is known and dev_cmd_query() is not used.<P>
<PRE>
 devserver                       device;
 DevVarStringArray       sig_config;
 DevVarFloatArray        param_array;
 long                              nu_of_properties;
 long                              nu_of_signals;
 long                              i, k;

 case (3) :
          /*
           *  Read the device signal values.
           */
            param_array.length   = 0;
            param_array.sequence = NULL;

           if (dev_putget (device, DevReadSigValues, NULL, D_VOID_TYPE,
                                   &amp;param_array, D_VAR_FLOATARR, &amp;error) &lt; 0)
                   {
                   dev_printerror_no (SEND, "DevReadSigValues", error);
                   break;
	                   }

             /*
              * Read the signal properies to display the values.
              */
             sig_config.length   = 0;
             sig_config.sequence = NULL;

             if (dev_putget (device, DevGetSigConfig, NULL, D_VOID_TYPE,
                                     &amp;sig_config, D_VAR_STRINGARR, &amp;error) &lt; 0)
                   {
                   dev_printerror_no (SEND, "DevGetSigConfig", error);
                   break;
                   } 
           /*
	            * Find the label format and unit for the signal values.
            */         
           nu_of_properties = atol (sig_config.sequence[0]);
           nu_of_signals    = (sig_config.length -1) / nu_of_properties;

           printf ("Device parameters:\n");
           for (i=0; i&lt;nu_of_signals; i++)
              {
              sprintf (format, "%24s [%2s] : %s\n",
              sig_config.sequence[(i*nu_of_properties) + 2],
              sig_config.sequence[(i*nu_of_properties) + 3],
              sig_config.sequence[(i*nu_of_properties) + 4]);
              printf (format, param_array.sequence[i]);
              }

           /*
            * Free the allocated arrays.
            */
          if ( dev_xdrfree (D_VAR_FLOATARR, &amp;param_array, &amp;error) 
                                    &lt; 0 )
              {
              dev_printerror_no (SEND, "dev_xdrfree", error);
              }
           if ( dev_xdrfree (D_VAR_STRINGARR, &amp;sig_config, &amp;error) &lt; 0 )
              {
              dev_printerror_no (SEND, "dev_xdrfree", error);
              }
           break;
</PRE>
<!-- TOC -->
<HR>
<ADDRESS>The Device Server Signal Interface - 27 FEB 1998</ADDRESS>
<A HREF="SignalInterface-8.html"><IMG ALIGN = BOTTOM SRC = "next.gif"></A> <A HREF="SignalInterface-6.html"><IMG ALIGN = BOTTOM SRC = "prev.gif"></A> <A HREF="SignalInterface-1.html"><IMG ALIGN = BOTTOM SRC = "top.gif"></A> <A HREF="SignalInterface-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif"></A> <IMG ALIGN = BOTTOM SRC = "indexg.gif"><P>
Generated with <A HREF="http://www.harlequin.com/webmaker">Harlequin WebMaker</A><P>
</BODY>
</HTML> 