AT_SETUP([launching starter server])
pers_name=`uname -n|cut -f1 -d'.'`
AT_DATA([starter.res], [[
]])
echo startserver/$pers_name/device:	SYS/START/$pers_name >starter.res
echo SYS/START/$pers_name/DEFAULT:	"Inst_verify/1", "AGPSpp/1" >>starter.res
AT_CHECK([RES_BASE_DIR=`pwd` taco db_update starter.res; 
taco StartServer $pers_name -d 
sleep 5
])
AT_CLEANUP

AT_SETUP([Starter server : Restart])
AT_DATA([starter], [[
8
Inst_verify 1
0
]])
AT_CHECK(AT_TACO_RUN_LOCAL([test_starter sys/start/`uname -n|cut -f1 -d'.'` 2>/dev/null < starter; sleep 3]), [0],
[[Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?
DevRestart dev_put() returned 0
Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?]])
AT_CLEANUP

AT_SETUP([Starter server : Stop])
AT_DATA([starter], [[
7
AGPSpp 1
7
Inst_verify 1
0
]])
AT_CHECK(AT_TACO_RUN_LOCAL([test_starter sys/start/`uname -n|cut -f1 -d'.'` 2>/dev/null < starter; sleep 3]), [0],
[[Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?
DevStop devput() returned 0
Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?
DevStop devput() returned 0
Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?]])
AT_CLEANUP

AT_SETUP([Starter server : Start])
AT_DATA([starter], [[
6
AGPSpp 1
0
]])
AT_CHECK(AT_TACO_RUN_LOCAL([test_starter sys/start/`uname -n|cut -f1 -d'.'` 2>/dev/null < starter; sleep 3]), [0],
[[Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?DevRun dev_put() returned 0
Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?]])
AT_CLEANUP

AT_SETUP([Shutting down Starter server])
AT_DATA([starter], [[
7
AGPSpp 1
0
]])
AT_CHECK([
AT_TACO_RUN_LOCAL([test_starter sys/start/`uname -n|cut -f1 -d'.'` 2>/dev/null < starter; sleep 3; ])
AT_TACO_RUN_LOCAL([off StartServer >>log])], [0],
[[Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?
DevStop devput() returned 0
Select one of the following commands:

0. Quit
1. On          2. Off          3. Reset
4. State       5. Status
6. Run         7. Stop         8. Restart
cmd ?]])
AT_CLEANUP


